package systems;
import gamestates.GameplayState;
import main.MyAnimation;

import org.newdawn.slick.Animation;
import org.newdawn.slick.Image;

import components.Spell;
import components.Sprite;
import components.Animations;
import components.Velocity;
import components.Position;

import com.artemis.Entity;
import com.artemis.EntityProcessingSystem;
import com.artemis.ComponentMapper;

public class SpellRenderSystem extends EntityProcessingSystem
{
	private ComponentMapper<Spell> spells;
	private ComponentMapper<Position> pos;
	private ComponentMapper<Animations> animation;
	
	MyAnimation a;
	Image[] images;

	public SpellRenderSystem()
	{
		super(Animations.class, Spell.class);
	}

	public void initialize()
	{
		pos = new ComponentMapper<Position>(Position.class, world);
		animation = new ComponentMapper<Animations>(Animations.class, world);
		
	}
	
	@Override
	protected void process(Entity e) 
	{	
		a = spells.get(e).getSpellCast();
		a.setRotation(pos.get(e).getTheta());

		a.draw(pos.get(e).getX(), pos.get(e).getY());

		if(pos.get(e).isMoving() && !pos.get(e).isCasting())
		{
			animation.get(e).getAnimation().draw(pos.get(e).getX(), pos.get(e).getY() + GameplayState.getInstance().getYOffset());
		}
	}

}
